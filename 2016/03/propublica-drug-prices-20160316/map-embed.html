<div id="responsive-embed-propublica-map-20160316"></div>
<script type="text/javascript">
    // Require.js is on the page (new Seamus)
    if (typeof requirejs !== 'undefined') {
        // Create a local require.js namespace
        var require_propublica_map_20160316 = requirejs.config({
            context: 'propublica-map-20160316',
            paths: {
                'pym': 'https://projects.propublica.org/graphics/javascripts/common/pym.0.4.4.min'
            },
    		shim: {
    			'pym': { exports: 'pym' }
    		}
        });

        // Load pym into locale namespace
        require_propublica_map_20160316(['require', 'pym'], function (require, Pym) {
            // Create pym parent
            var pymParent = new Pym.Parent(
                'responsive-embed-propublica-map-20160316',
                'https://projects.propublica.org/graphics/brand-name-prescribing-map?layout=embed',
                {}
            );

            // Unbind events when the page changes
            document.addEventListener('npr:pageUnload', function (e) {
                // Unbind *this* event once its run once
                e.target.removeEventListener(e.type, arguments.callee);

                // Pym versions with "remove"
                if (typeof pymParent.remove == 'function') {
                    pymParent.remove();
                // Pym version without "remove"
                } else {
                    // Unbind pym events
                    window.removeEventListener('message', pymParent._processMessage);
                    window.removeEventListener('resize', pymParent._onResize);
                }

                // Explicitly unload pym library
                require_propublica_map_20160316.undef('pym');
                require_propublica_map_20160316 = null;
            })
        });
    // Require.js is not on the page, but jQuery is (old Seamus)
    } else if (typeof $ !== 'undefined' && typeof $.getScript === 'function') {
        // Load pym
        $.getScript('https://projects.propublica.org/graphics/javascripts/common/pym.0.4.4.min.js').done(function () {
            // Wait for page load
            $(function () {
                // Create pym parent
                var pymParent = new pym.Parent(
                    'responsive-embed-propublica-map-20160316',
                    'https://projects.propublica.org/graphics/brand-name-prescribing-map?layout=embed',
                    {}
                );
            });
        });
    // Neither require.js nor jQuery are on the page
    } else {
        console.error('Could not load propublica-map-20160316! Neither require.js nor jQuery are on the page.');
    }
</script>
    
