{% extends 'base_template.html' %}

{% block content %}

    {% if COPY.labels.headline %}<h1>{{ COPY.labels.headline }}</h1>{% endif %}
    {% if COPY.labels.subhed %}<p>{{ render(COPY.labels.subhed) }}</p>{% endif %}

    <div id="lookup">
        <span class="prefix">Choose a state:</span>
        <select>
            {% for state in COPY.states %}
            <option value="{{ state.usps }}" {% if state.usps == 'TX' %}selected="selected"{% endif %}>{{ state.name }}</option>
            {% endfor %}
        </select>
    </div>

    <div id="rates">
    </div>

    <div id="units">
    </div>

    <div id="requirements">
    </div>

    <div id="ccr-wrapper">
    </div>

    <div id="map-spacer">
        &nbsp;
    </div>

    <div id="algebra-wrapper">
    </div>

    <div id="act-scores">
    </div>

    <div id="read-more">
    </div>

    {% if COPY.labels.footnote %}
    <div class="footnotes">
        <h4>Notes</h4>
        <p>{{ COPY.labels.footnote }}</p>
    </div>
    {% endif %}

    <div class="footer">
        {% if COPY.labels.source %}<p>Sources: {{ COPY.labels.source }}</p>{% endif %}
        {% if COPY.labels.credit %}<p>Credit: {{ COPY.labels.credit }}</p>{% endif %}
    </div>

    <div id="map-template" style="display: none;">
        <ul class="key"></ul>

        <?xml version="1.0" encoding="UTF-8" standalone="no"?>
        <svg viewBox="0 0 436 254" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns">
            <title>map</title>
            <desc></desc>
            <defs></defs>
            <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" sketch:type="MSPage">
                <g class="map" sketch:type="MSLayerGroup" transform="translate(1.000000, 2.000000)" stroke-width="2" stroke="#FFFFFF" fill="#DDDDDD">
                    <g class="states" sketch:type="MSShapeGroup">
                        <path d="M35.5255888,0 L52.8460969,10 L52.8460969,30 L35.5255888,40 L18.2050808,30 L18.2050808,10 L35.5255888,0 Z" class="state-alaska"></path>
                        <path d="M416.576766,0 L433.897275,10 L433.897275,30 L416.576766,40 L399.256258,30 L399.256258,10 L416.576766,0 Z" class="state-maine"></path>
                        <path d="M364.615242,30 L381.93575,40 L381.93575,60 L364.615242,70 L347.294734,60 L347.294734,40 L364.615242,30 Z" class="state-vermont"></path>
                        <path d="M399.256258,30 L416.576766,40 L416.576766,60 L399.256258,70 L381.93575,60 L381.93575,40 L399.256258,30 Z" class="state-new-hampshire"></path>
                        <path d="M70.166605,60 L87.4871131,70 L87.4871131,90 L70.166605,100 L52.8460969,90 L52.8460969,70 L70.166605,60 Z" class="state-washington"></path>
                        <path d="M104.807621,60 L122.128129,70 L122.128129,90 L104.807621,100 L87.4871131,90 L87.4871131,70 L104.807621,60 Z" class="state-montana"></path>
                        <path d="M139.448637,60 L156.769145,70 L156.769145,90 L139.448637,100 L122.128129,90 L122.128129,70 L139.448637,60 Z" class="state-north-dakota"></path>
                        <path d="M174.089653,60 L191.410162,70 L191.410162,90 L174.089653,100 L156.769145,90 L156.769145,70 L174.089653,60 Z" class="state-minnesota"></path>
                        <path d="M208.73067,60 L226.051178,70 L226.051178,90 L208.73067,100 L191.410162,90 L191.410162,70 L208.73067,60 Z" class="state-wisconsin"></path>
                        <path d="M278.012702,60 L295.33321,70 L295.33321,90 L278.012702,100 L260.692194,90 L260.692194,70 L278.012702,60 Z" class="state-michigan"></path>
                        <path d="M347.294734,60 L364.615242,70 L364.615242,90 L347.294734,100 L329.974226,90 L329.974226,70 L347.294734,60 Z" class="state-new-york"></path>
                        <path d="M381.93575,60 L399.256258,70 L399.256258,90 L381.93575,100 L364.615242,90 L364.615242,70 L381.93575,60 Z" class="state-massachusetts"></path>
                        <path d="M416.576766,60 L433.897275,70 L433.897275,90 L416.576766,100 L399.256258,90 L399.256258,70 L416.576766,60 Z" class="state-rhode-island"></path>
                        <path d="M87.4871131,90 L104.807621,100 L104.807621,120 L87.4871131,130 L70.166605,120 L70.166605,100 L87.4871131,90 Z" class="state-idaho"></path>
                        <path d="M122.128129,90 L139.448637,100 L139.448637,120 L122.128129,130 L104.807621,120 L104.807621,100 L122.128129,90 Z" class="state-wyoming"></path>
                        <path d="M156.769145,90 L174.089653,100 L174.089653,120 L156.769145,130 L139.448637,120 L139.448637,100 L156.769145,90 Z" class="state-south-dakota"></path>
                        <path d="M191.410162,90 L208.73067,100 L208.73067,120 L191.410162,130 L174.089653,120 L174.089653,100 L191.410162,90 Z" class="state-iowa"></path>
                        <path d="M226.051178,90 L243.371686,100 L243.371686,120 L226.051178,130 L208.73067,120 L208.73067,100 L226.051178,90 Z" class="state-illinois"></path>
                        <path d="M260.692194,90 L278.012702,100 L278.012702,120 L260.692194,130 L243.371686,120 L243.371686,100 L260.692194,90 Z" class="state-indiana"></path>
                        <path d="M295.33321,90 L312.653718,100 L312.653718,120 L295.33321,130 L278.012702,120 L278.012702,100 L295.33321,90 Z" class="state-ohio"></path>
                        <path d="M329.974226,90 L347.294734,100 L347.294734,120 L329.974226,130 L312.653718,120 L312.653718,100 L329.974226,90 Z" class="state-pennsylvania"></path>
                        <path d="M364.615242,90 L381.93575,100 L381.93575,120 L364.615242,130 L347.294734,120 L347.294734,100 L364.615242,90 Z" class="state-new-jersey"></path>
                        <path d="M399.256258,90 L416.576766,100 L416.576766,120 L399.256258,130 L381.93575,120 L381.93575,100 L399.256258,90 Z" class="state-connecticut"></path>
                        <path d="M70.166605,120 L87.4871131,130 L87.4871131,150 L70.166605,160 L52.8460969,150 L52.8460969,130 L70.166605,120 Z" class="state-oregon"></path>
                        <path d="M104.807621,120 L122.128129,130 L122.128129,150 L104.807621,160 L87.4871131,150 L87.4871131,130 L104.807621,120 Z" class="state-nevada"></path>
                        <path d="M139.448637,120 L156.769145,130 L156.769145,150 L139.448637,160 L122.128129,150 L122.128129,130 L139.448637,120 Z" class="state-colorado"></path>
                        <path d="M174.089653,120 L191.410162,130 L191.410162,150 L174.089653,160 L156.769145,150 L156.769145,130 L174.089653,120 Z" class="state-nebraska"></path>
                        <path d="M208.73067,120 L226.051178,130 L226.051178,150 L208.73067,160 L191.410162,150 L191.410162,130 L208.73067,120 Z" class="state-missouri"></path>
                        <path d="M243.371686,120 L260.692194,130 L260.692194,150 L243.371686,160 L226.051178,150 L226.051178,130 L243.371686,120 Z" class="state-kentucky"></path>
                        <path d="M278.012702,120 L295.33321,130 L295.33321,150 L278.012702,160 L260.692194,150 L260.692194,130 L278.012702,120 Z" class="state-west-virginia"></path>
                        <path d="M312.653718,120 L329.974226,130 L329.974226,150 L312.653718,160 L295.33321,150 L295.33321,130 L312.653718,120 Z" class="state-virginia"></path>
                        <path d="M347.294734,120 L364.615242,130 L364.615242,150 L347.294734,160 L329.974226,150 L329.974226,130 L347.294734,120 Z" class="state-maryland"></path>
                        <path d="M381.93575,120 L399.256258,130 L399.256258,150 L381.93575,160 L364.615242,150 L364.615242,130 L381.93575,120 Z" class="state-delaware"></path>
                        <path d="M87.4871131,150 L104.807621,160 L104.807621,180 L87.4871131,190 L70.166605,180 L70.166605,160 L87.4871131,150 Z" class="state-california"></path>
                        <path d="M122.128129,150 L139.448637,160 L139.448637,180 L122.128129,190 L104.807621,180 L104.807621,160 L122.128129,150 Z" class="state-utah"></path>
                        <path d="M156.769145,150 L174.089653,160 L174.089653,180 L156.769145,190 L139.448637,180 L139.448637,160 L156.769145,150 Z" class="state-new-mexico"></path>
                        <path d="M191.410162,150 L208.73067,160 L208.73067,180 L191.410162,190 L174.089653,180 L174.089653,160 L191.410162,150 Z" class="state-kansas"></path>
                        <path d="M226.051178,150 L243.371686,160 L243.371686,180 L226.051178,190 L208.73067,180 L208.73067,160 L226.051178,150 Z" class="state-arkansas"></path>
                        <path d="M260.692194,150 L278.012702,160 L278.012702,180 L260.692194,190 L243.371686,180 L243.371686,160 L260.692194,150 Z" class="state-tennessee"></path>
                        <path d="M295.33321,150 L312.653718,160 L312.653718,180 L295.33321,190 L278.012702,180 L278.012702,160 L295.33321,150 Z" class="state-north-carolina"></path>
                        <path d="M329.974226,150 L347.294734,160 L347.294734,180 L329.974226,190 L312.653718,180 L312.653718,160 L329.974226,150 Z" class="state-south-carolina"></path>
                        <path d="M364.615242,150 L381.93575,160 L381.93575,180 L364.615242,190 L347.294734,180 L347.294734,160 L364.615242,150 Z" class="state-district-of-columbia"></path>
                        <path d="M139.448637,180 L156.769145,190 L156.769145,210 L139.448637,220 L122.128129,210 L122.128129,190 L139.448637,180 Z" class="state-arizona"></path>
                        <path d="M174.089653,180 L191.410162,190 L191.410162,210 L174.089653,220 L156.769145,210 L156.769145,190 L174.089653,180 Z" class="state-oklahoma"></path>
                        <path d="M208.73067,180 L226.051178,190 L226.051178,210 L208.73067,220 L191.410162,210 L191.410162,190 L208.73067,180 Z" class="state-louisiana"></path>
                        <path d="M243.371686,180 L260.692194,190 L260.692194,210 L243.371686,220 L226.051178,210 L226.051178,190 L243.371686,180 Z" class="state-mississippi"></path>
                        <path d="M278.012702,180 L295.33321,190 L295.33321,210 L278.012702,220 L260.692194,210 L260.692194,190 L278.012702,180 Z" class="state-alabama"></path>
                        <path d="M312.653718,180 L329.974226,190 L329.974226,210 L312.653718,220 L295.33321,210 L295.33321,190 L312.653718,180 Z" class="state-georgia"></path>
                        <path d="M18.2050808,210 L35.5255888,220 L35.5255888,240 L18.2050808,250 L0.884572681,240 L0.884572681,220 L18.2050808,210 Z" class="state-hawaii"></path>
                        <path d="M191.410162,210 L208.73067,220 L208.73067,240 L191.410162,250 L174.089653,240 L174.089653,220 L191.410162,210 Z" class="state-texas"></path>
                        <path d="M295.33321,210 L312.653718,220 L312.653718,240 L295.33321,250 L278.012702,240 L278.012702,220 L295.33321,210 Z" class="state-florida"></path>
                    </g>
                </g>
            </g>
        </svg>
    </div>

    <script id="rates-template" type="text/template">
        <h2>{{ COPY.labels.rates_title }} in <span class="nowrap"><%= state.display || state.name %></span></h2>

        <p>{{ COPY.labels.rates_body }}</p>

        <table>
            <thead>
                <tr>
                    <th class="amt">{{ COPY.labels.rates_rank }}</th>
                    <th class="amt">{{ COPY.labels.rates_change_point }}</th>
                    <th class="amt">{{ COPY.labels.rates_2011 }}</th>
                    <th class="amt">{{ COPY.labels.rates_2012 }}</th>
                    <th class="amt">{{ COPY.labels.rates_2013 }}</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td class="amt shade" data-title="{{ COPY.labels.rates_rank }}"><strong><%= rates.rank %></strong></td>
                    <td class="amt shade" data-title="{{ COPY.labels.rates_change_point }}"><strong><% if (rates.change_point) { %><% if (rates.change_point > 0) { %>+<% } %><%= rates.change_point   %><% } else { %>N/A<% } %></strong></td>
                    <td class="amt" data-title="{{ COPY.labels.rates_2011 }}"><% if (rates.rate11) { %><%= rates.rate11 %>%<% } else { %>Unavailable<sup>1</sup><% } %></td>
                    <td class="amt" data-title="{{ COPY.labels.rates_2012 }}"><% if (rates.rate12) { %><%= rates.rate12 %>%<% } else { %>Unavailable<sup>1</sup><% } %></td>
                    <td class="amt" data-title="{{ COPY.labels.rates_2013 }}"><% if (rates.rate13) { %><%= rates.rate13 %>%<% } else { %>Unavailable<sup>1</sup><% } %></td>
                </tr>
            </tbody>
        </table>
    </script>

    <script id="units-template" type="text/template">
        <h2>What diplomas does <%= state.display || state.name %> offer?</h2>

        <p><%= state.display || state.name %> offers <strong><%= intToText(units.length) %></strong> type<% if (units.length > 1) { %>s<% } %> of diploma. {{ COPY.labels.units_body }}</p>

        <table>
            <thead>
                <tr>
                    <th>{{ COPY.labels.units_diploma }}</th>
                    <th>{{ COPY.labels.units_type }}</th>
                </tr>
            </thead>
            <tbody>
                <% _.each(units, function(diploma) { %>
                <tr>
                    <td data-title="{{ COPY.labels.units_diploma }}"><%= diploma.diploma %></td>
                    <td data-title="{{ COPY.labels.units_type }}"><%= diploma.diploma_type %></td>
                </tr>
                <% }) %>
            </tbody>
        </table>
    </script>

    <script id="requirements-template" type="text/template">
        <h2>How hard is it to get a diploma in <%= state.display || state.name %>?</h2>

        <p>
            <% if (exit_exams.description) { %>
                <%= exit_exams.description %>
            <% } else { %>
                <%= state.display || state.name %> does not require students to pass a state assessment to graduate.
            <% } %> Not all states require exit exams and many of those that do also offer alternative paths to a diploma if students cannot pass them.
        </p>
    </script>

    <script id="ccr-template" type="text/template">
        <h3>{{ COPY.labels.ccr_title }}</h3>

        <p><%= state.display || state.name %>
            <% if (ccr.category == 'Mandatory CCR diploma requirements') { %>
                has a <strong>mandatory</strong> college and career ready diploma.
            <% } else if (ccr.category == 'Allows opt-out or individual modification') { %>
                has a college and career ready diploma, but <strong>allows students to opt into alternative or make individual modifications</strong>.
            <% } else if (ccr.category == 'Opt-in CCR diploma requirements') { %>
                has a college and career ready diploma, but <strong>students must opt-in to it</strong>.
            <% } else { %>
                <strong>does not have</strong> a college and career ready diploma.
            <% } %>
            {{ COPY.labels.ccr_body }}
        </p>

        <div id="ccr-map">
        </div>
    </script>

    <script id="algebra-template" type="text/template">
        <h3>{{ COPY.labels.algebra_title }}</h3>

        <p><%= state.display || state.name %>
            <% if (algebra.category == 'Required to graduate') { %>
                <strong>requires</strong> that students take Algebra II to graduate.
            <% } else if (algebra.category == 'Automatic enrollment, but student may opt-out') { %>
                <strong>automatically enrolls</strong> students in Algebra II, but allows students to opt out.
            <% } else { %>
                <strong>does not require</strong> students to take Algebra II in order to graduate.
            <% } %>
            {{ COPY.labels.algebra_body }}
        </p>

        <div id="algebra-map">
        </div>
    </script>

    <script id="act-scores-template" type="text/template">
        <h2>{{ COPY.labels.scores_title }}</h2>

        <h3>{{ COPY.labels.act_scores_title }}</h3>

        <p>In <%= state.display || state.name %>, <strong><%= act_scores.pct_tested %>%</strong> of graduating students took the ACT exam in 2014. {{ COPY.labels.act_scores_body }}</p>

        <table>
            <thead>
                <tr>
                    <th></th>
                    <th class="amt"><%= state.ap %> {{ COPY.labels.act_scores_average }}</th>
                    <th class="amt">{{ COPY.labels.act_scores_benchmarks }}</th>
                    <th class="amt">{{ COPY.labels.act_scores_meeting }}</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>{{ COPY.labels.act_scores_english }}</td>
                    <td class="amt" data-title="<%= state.ap %> {{ COPY.labels.act_scores_average }}"><%= act_scores.english_score %></td>
                    <td class="amt" data-title="{{ COPY.labels.act_scores_benchmarks }}">{{ COPY.labels.act_english_benchmark }}</td>
                    <td class="amt" data-title="{{ COPY.labels.act_scores_meeting }}"><%= act_scores.meeting_english %>%</td>
                </tr>
                <tr>
                    <td>{{ COPY.labels.act_scores_reading }}</td>
                    <td class="amt" data-title="<%= state.ap %> {{ COPY.labels.act_scores_average }}"><%= act_scores.reading_score %></td>
                    <td class="amt" data-title="{{ COPY.labels.act_scores_benchmarks }}">{{ COPY.labels.act_reading_benchmark }}</td>
                    <td class="amt" data-title="{{ COPY.labels.act_scores_meeting }}"><%= act_scores.meeting_reading %>%</td>
                </tr>
                <tr>
                    <td>{{ COPY.labels.act_scores_math }}</td>
                    <td class="amt" data-title="<%= state.ap %> {{ COPY.labels.act_scores_average }}"><%= act_scores.math_score %></td>
                    <td class="amt" data-title="{{ COPY.labels.act_scores_benchmarks }}">{{ COPY.labels.act_math_benchmark }}</td>
                    <td class="amt" data-title="{{ COPY.labels.act_scores_meeting }}"><%= act_scores.meeting_math %>%</td>
                </tr>
                <tr>
                    <td>{{ COPY.labels.act_scores_science }}</td>
                    <td class="amt" data-title="<%= state.ap %> {{ COPY.labels.act_scores_average }}"><%= act_scores.science_score %></td>
                    <td class="amt" data-title="{{ COPY.labels.act_scores_benchmarks }}">{{ COPY.labels.act_science_benchmark }}</td>
                    <td class="amt" data-title="{{ COPY.labels.act_scores_meeting }}"><%= act_scores.meeting_science %>%</td>
                </tr>
            </tbody>
        </table>

        <h3>{{ COPY.labels.sat_scores_title }}</h3>

        <p>In <% if (state.usps == 'DC') { %>the <% } %><%= state.name %>, <strong><%= sat_scores.pct_tested %>%</strong> of graduating students took the SAT exam in 2014. <strong><%= sat_scores.meeting_benchmark %>%</strong> met the College Board's benchmark score of 1550<sup>4</sup> (out of 2400). {{ COPY.labels.sat_scores_body }}</p>
    </script>

    <script id="read-more-template" type="text/template">
        <% if (read_more) { %>
            <h2>From <%= state.display || state.name %> member stations</h2>

            <a href="<%= read_more.link %>" target="_blank">Follow the story to <%= read_more.city %> </a> with <%= read_more.author %> of member station <%= read_more.call_letters %>.
        <% } %>
    </script>

    <script type="text/javascript">
        var STATES = {{ COPY.states.json() }};
        var RATES_DATA = {{ COPY.rates.json() }};
        var UNITS_DATA = {{ COPY.units.json() }};
        var CCR_DATA = {{ COPY.ccr.json() }};
        var ALGEBRA_DATA = {{ COPY.algebra.json() }};
        var ACT_SCORES_DATA = {{ COPY.act_scores.json() }};
        var SAT_SCORES_DATA = {{ COPY.sat_scores.json() }};
        var EXIT_EXAMS_DATA = {{ COPY.exit_exams.json() }};
        var READ_MORE_DATA = {{ COPY.read_more.json() }};
    </script>

    <script src="//js.maxmind.com/js/apis/geoip2/v2.1/geoip2.js" type="text/javascript"></script>

{% endblock content %}
